{
  "openapi": "3.0.2",
  "info": {
    "title": "Zoonotify Server",
    "description": "This is the api of the Zoonotify server",
    "contact": {
      "email": "zoonotify@bfr.bund.de"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    },
    "version": "1.2.0"
  },
  "externalDocs": {
    "description": "Find out more about the Zoonotify",
    "url": "https://zoonotify.bfr.bund.de/content/faq"
  },
  "servers": [
    {
      "url": "https://zoonotify.bfr.bund.de/v1"
    }
  ],
  "tags": [
    {
      "name": "Util",
      "description": "Access to Server Utiliy functions"
    }
  ],
  "paths": {
    "/info": {
      "get": {
        "operationId": "getSystemInfo",
        "tags": [
          "Util"
        ],
        "summary": "Retrieve server information",
        "description": "Returns current server version number as well as the date of the last server update.",
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemInformation"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Standard500ErrorResponse"
          }
        }
      }
    },
    "/filterconfig": {
      "get": {
        "operationId": "getFilterConfig",
        "tags": [
          "Util"
        ],
        "summary": "Retrieve information about filter",
        "description": "Returns filterconfig as JSON.",
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FilterConfigContainer"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Standard500ErrorResponse"
          }
        }
      }
    },
    "/Statistic": {
      "get": {
        "operationId": "getNumberOfIsolates",
        "tags": [
          "Util"
        ],
        "summary": "Retrieve the staistic about the dataset",
        "description": "Returns object with the total number of isolaets and statistic table",
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Statistic"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Standard500ErrorResponse"
          }
        }
      }
    },
    "/selectedSettings": {
      "put": {
        "operationId": "putCurrentFilter",
        "tags": [
          "Util"
        ],
        "summary": "Put selected filters and row/columns",
        "description": "Update informations about the selected filter settings and displayed features",
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SelectedSettings"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Standard500ErrorResponse"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Error": {
        "type": "object",
        "required": [
          "code",
          "message"
        ],
        "properties": {
          "message": {
            "type": "string"
          },
          "code": {
            "$ref": "#/components/schemas/ErrorCode"
          }
        }
      },
      "ErrorCode": {
        "type": "number",
        "description": "- 1: Unknown error",
        "enum": [
          1
        ]
      },
      "SystemInformation": {
        "required": [
          "lastChange",
          "version",
          "supportContact"
        ],
        "type": "object",
        "properties": {
          "version": {
            "type": "string",
            "description": "Server version number"
          },
          "supportContact": {
            "type": "string",
            "description": "Email of the Zoonotify support"
          },
          "lastChange": {
            "type": "string",
            "description": "Date of last code change",
            "format": "date-time"
          }
        }
      },
      "FilterConfigContainer": {
        "type": "object",
        "required": [
          "filters"
        ],
        "properties": {
          "filters": {
            "$ref": "#/components/schemas/FilterConfigList"
          }
        }
      },
      "FilterConfigList": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/FilterConfigInformation"
        }
      },
      "FilterConfigInformation": {
        "type": "object",
        "description": "Poperties for one filter",
        "required": [
          "id",
          "name",
          "values"
        ],
        "properties": {
          "id": {
            "type": "string",
            "description": "Unique ID of the filter"
          },
          "name": {
            "type": "string",
            "description": "Name of the filter"
          },
          "parent": {
            "type": "string",
            "description": "Id of corresponding mainfilter-IDs"
          },
          "values": {
            "type": "array",
            "description": "List of filter values",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "Statistic": {
        "type": "object",
        "properties": {
          "totalNumberOfIsolates": {
            "type": "number"
          },
          "table": {
            "$ref": "#/components/schemas/StatisticTable"
          }
        }
      },
      "StatisticTable": {
        "type": "object",
        "properties": {
          "columns": {
            "$ref": "#/components/schemas/StatisticTableColumns"
          },
          "rows": {
            "$ref": "#/components/schemas/StatisticTableRowsList"
          }
        }
      },
      "StatisticTableColumns": {
        "type": "array",
        "items": {
          "type": "string"
        }
      },
      "StatisticTableRowsList": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/StatisticTableRowsInformation"
        }
      },
      "StatisticTableRowsInformation": {
        "type": "object",
        "properties": {
          "rowname": {
            "type": "string"
          },
          "values": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      },
      "SelectedSettings": {
        "type": "object",
        "properties": {
          "filters": {
            "$ref": "#/components/schemas/SelectedFilterSettingsList"
          },
          "row": {
            "type": "string"
          },
          "column": {
            "type": "string"
          }
        }
      },
      "SelectedFilterSettingsList": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/SelectedFilterSettingsInformation"
        }
      },
      "SelectedFilterSettingsInformation": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "values": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "responses": {
      "Standard500ErrorResponse": {
        "description": "An unexpected error occured",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Standard400ErrorResponse": {
        "description": "Invalid request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      }
    },
    "parameters": {},
    "requestBodies": {},
    "securitySchemes": {}
  }
}